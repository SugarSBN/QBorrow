borrow@ q[4];

X[q[1]];

borrow anc;

    CCNOT[q[1], q[2], anc];
    CCNOT[anc, q[3], q[4]];
    CCNOT[q[1], q[2], anc];
    
    /*
    alloc t;
        X[t];
        CNOT[t, anc];
    release t;
    */
    
    CCNOT[anc, q[3], q[4]];

release anc;

X[q[1]];

release q;